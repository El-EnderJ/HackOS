; PlatformIO Project Configuration File
;
; @file platformio.ini
; @brief Build configuration for HackOS on ESP32 DevKit (240 MHz, 4 MB Flash).
;
; Defines the target board, serial monitor speed, custom partition table,
; and all third-party library dependencies required by HackOS.

[env:esp32dev]
platform  = espressif32
board     = esp32dev
framework = arduino

; ── Serial monitor ──────────────────────────────────────────────────────────
monitor_speed = 115200

; ── Custom partition table ───────────────────────────────────────────────────
board_build.partitions = partitions.csv

; ── Library dependencies ─────────────────────────────────────────────────────
lib_deps =
    ; OLED display – Adafruit SSD1306 + GFX foundation
    adafruit/Adafruit SSD1306 @ ^2.5.7
    adafruit/Adafruit GFX Library @ ^1.11.9

    ; NFC – PN532 driver (Adafruit)
    adafruit/Adafruit PN532 @ ^1.2.2

    ; IR transceiver – send/receive arbitrary IR protocols
    crankyoldgit/IRremoteESP8266 @ ^2.8.6

    ; RF 433 MHz – send/receive OOK codes
    sui77/rc-switch @ ^2.6.4

    ; BLE – lightweight NimBLE stack (replaces Bluedroid, saves ~400 KB)
    h2zero/NimBLE-Arduino @ ^1.4.3

; ── Compiler flags ───────────────────────────────────────────────────────────
build_flags =
    -std=gnu++17
    -Wall
    -Wextra
    ; ── Size optimisation ────────────────────────────────────────────────
    -Os
    -ffunction-sections
    -fdata-sections
    ; Linker: remove dead code
    -Wl,--gc-sections
    ; Use NimBLE instead of Bluedroid (saves ~400 KB Flash + RAM)
    -D CONFIG_BT_NIMBLE_ENABLED=1
